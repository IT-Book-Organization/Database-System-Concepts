# 7.8 원자적 도메인과 제1정규형

<br/>

E-R 모델은 개체 집합과 관계 집합이 `여러 단계의 하부 구조로 표현되는 속성`을 가지는 것을 허용한다.

특히 `다중값 속성`이나 `복합 속성`을 가지는 것을 허용한다. (아래 사진 참고)

- 다중값 속성 : phone_number
- 복합 속성 : address (구성요소 속성 street, city, state를 가짐)

<p align="center"><img width="200" alt="다중값 속성, 복합 속성" src="https://user-images.githubusercontent.com/86337233/225689964-48742250-c176-4c17-b3d3-3d491190cef6.png">

<br/>
<br/>
<br/>

## 제1정규형

관계형 모델에서 속성이 하부 구조를 가질 수 없다는 개념을 형식화했다.

<br/>

> **도메인의 원소가 나눌 수 없는 단위로 되어 있을 때** 그 도메인은 `원자적(atomic)`이라고 한다.

> 릴레이션 스키마 R의 **모든 속성의 도메인이 원자적일 때** R이 `제 1정규형(first normal from, INF)`에 속한다고 한다.

<br/>

중요한 쟁점은 도메인 자체가 무엇인가가 아니라 **도메인 원소를 데이터베이스에서 어떻게 사용하는가** 하는 점이다.

<br/>

e.g., 정수

- 정수는 원자적으로 볼 수 있지만, 정수의 모든 집합의 집합은 원자적인 도메인이 아니다.
- 만약 정수를 숫자의 정렬된 리스트라고 간주한다면, 모든 정수의 도메인은 원자적이 아닐 것이다.

<br/>

e.g., 직원 식별 번호

”CS0001”, “EE1127”처럼 처음 두 글자는 부서를 나타내며, 나머지 네 숫자는 그 부서 내에서 직원의 고유한 번호를 나타내는 형태로  
직원 식별 번호를 부여하는 조직이 있다고 가정해보자.

- 이 직원 식별 번호는 더 작은 단위로 나눌 수 있으므로 원자성을 갖지 않는다.
- 따라서 만일 위와 같이 직원 식별 번호를 구성하는 속성을 지닌 릴레이션 스키마가 있다면 그 스키마는 제1정규형이 아니다.
- 위 식별 번호를 사용하게 되면 발생하는 문제점
    - 식별 번호의 구조를 분해하는 코드를 작성해서 직원의 부서를 찾을 수 있는데 이 방식은 부가적인 프로그래밍이 필요하게 되며,  
      정보는 데이터베이스가 아닌 응용 프로그램에서 인코딩된다.
    - 때로는 식별 번호를 해석하는 코드가 잘못된 결과를 낼 수 있다.
    - 이런 식별 번호를 주 키로 사용한다면 직원이 부서를 옮길 경우 직원 식별 번호가 나타나는 모든 곳에서 수정이 이루어져야 한다.

<br/>

e.g., 과목 식별자

“CS-101”를 사용하는 경우 “CS”가 컴퓨터 과학학과를 의미하므로, 이 식별자의 도메인은 원자적이 아닌 것처럼 보인다.

- 이 도메인은 시스템을 사용하는 인간의 관점으로 볼 때 원자적이지 않다.
- 그러나 식별자를 분할하여 식별자의 일부를 학과의 약어로 해석하는 시도를 하지 않는 한, 데이터베이스 응용 프로그램은 이 도메인을 원자적으로 취급한다.

course 스키마는 학과 이름을 분리된 속성으로 저장하고 있어 데이터베이스 응용 프로그램은 과목 식별자의 특정 문자를 해석하는 대신  
이 속성을 사용하여 과목의 학과 이름을 찾을 수 있기 때문에, 앞의 대학교 스키마는 제1정규형으로 간주할 수 있다.
